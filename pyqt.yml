name: PyQt5
cleanup:
- "/include"
- "/lib/python3.10/site-packages/*.pyi"
- "/lib/python3.10/site-packages/PyQt5/uic"
config-opts:
- "--disable-static"
- "--enable-x11"
buildsystem: simple
build-commands:
- python3 configure.py --confirm-license --no-docstrings --assume-shared --no-sip-files
  --no-qml-plugin --no-tools --no-qsci-api -d ${FLATPAK_DEST}/lib/python3.10/site-packages
  --sip=${FLATPAK_DEST}/bin/sip --sip-incdir=${FLATPAK_DEST}/include --stubsdir=${FLATPAK_DEST}/lib/python3.10/site-packages
  --disable=QtSensors --disable=QtWebEngine --disable=QtQuick --disable=QtQml --disable=QtTest
  --disable=QtWebChannel --disable=QtWebEngineCore --disable=QWebEngineWidgets --disable=QtQuickWidgets
  --disable=QtSql --disable=QtXmlPatterns --disable=QtMultimedia --disable=QtMultimediaWidgets
  --disable=QtLocation --disable=QtDesigner --disable=QtOpenGL --disable=QtBluetooth
  --disable=QtWebKit --disable=QtWebKitWidgets --disable=QtNfc --disable=QtPositioning
  --disable=QtHelp --disable=QtNetwork --disable=QtPrintSupport --disable=QtXml
  --disable=QtSerialPort --disable=QtWebSockets --disable=QtRemoteObjects --disable=QtTextToSpeech
  --disable=_QOpenGLFunctions_2_0 --disable=_QOpenGLFunctions_2_1 --disable=_QOpenGLFunctions_4_1_Core
- make -j $(nproc)
- make install
sources:
- type: archive
  url: https://files.pythonhosted.org/packages/4d/5d/b8b6e26956ec113ad3f566e02abd12ac3a56b103fcc7e0735e27ee4a1df3/PyQt5-5.15.10.tar.gz
  sha256: d46b7804b1b10a4ff91753f8113e5b5580d2b4462f3226288e2d84497334898a
modules:
- name: sip
  cleanup:
  - "/bin/sip*"
  - "/lib/python3.10/site-packages/sip*"
  buildsystem: simple
  build-commands:
  - python3 configure.py --sip-module PyQt5.sip -b ${FLATPAK_DEST}/bin -d ${FLATPAK_DEST}/lib/python3.10/site-packages
    -e ${FLATPAK_DEST}/include -v ${FLATPAK_DEST}/share/sip --stubsdir=${FLATPAK_DEST}/lib/python3.10/site-packages
  - make
  - make install
  sources:
  - type: archive
    url: https://www.riverbankcomputing.com/static/Downloads/sip/4.19.25/sip-4.19.25.tar.gz
    sha256: b39d93e937647807bac23579edbff25fe46d16213f708370072574ab1f1b4211
- name: PyQt5_sip
  buildsystem: simple
  build-commands:
  - python3 setup.py install --root=${FLATPAK_DEST} --prefix=""
  sources:
  - type: archive
    url: https://files.pythonhosted.org/packages/ee/81/fce2a475aa56c1f49707d9306b930695b6ff078c2242c9f2fd72a3214e1f/PyQt5_sip-12.13.0.tar.gz
    sha256: 7f321daf84b9c9dbca61b80e1ef37bdaffc0e93312edae2cd7da25b953971d91
